<html class="gr__localhost"><head>
    <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>home</title>
  <meta name="author" content="name">
  <meta name="description" content="description here">
  <meta name="keywords" content="keywords,here">
  <link rel="stylesheet" href="public/css/normalize.css" type="text/css">
  <link rel="stylesheet" href="public/css/skeleton.css" type="text/css">
  <link rel="stylesheet" href="public/css/custom.css" type="text/css">


  </head>
  <body>

  
<div class="navbarDiv">
	<div id="navbar"></div>
</div>
 

  
<div class="container">



<section class="header">


        <div class="">
            <img class="logo" style="max-width:200px" src="public/img/logo.png">
        </div>

      <h2 class="title" style="margin-top:20px;">A dead simple, responsive steem blog.</h2>

      <a class="button button-primary scroll" style="margin-top:20px;">More</a>
      
      <div class="value-props row">
        <div class="four columns value-prop">
          <img class="value-img" src="public/img/feather.svg">
          Light as a feather, built on mobile-ready Skeleton CSS
        </div>
        <div class="four columns value-prop">
          <img class="value-img" src="public/img/pens.svg">
          Redesign and customize everything to fit your brand.
        </div>
        <div class="four columns value-prop">
          <img class="value-img" src="public/img/watch.svg">
          Quick to start with zero compiling or installing necessary.
        </div>
      </div>
</section>



<section class="custom-section">

    <h5 style="text-align:center">About</h5>

    <h6 class="custom-header">Life</h6>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit cursus nunc.</p>
    
    <h6 class="custom-header">Education</h6>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit cursus nunc.</p>
    
    <h6 class="custom-header">Career</h6>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnit cursus nunc.</p>
    
</section>


<section class="custom-section" id="featured-post-section">

    <h5 style="text-align:center">Blog</h5>

		
		<div class="loader" id="loader"></div>
		
		<div class="posts" id="posts"></div>
		
    <div style="margin-bottom: 60px">
        <a class="button more" style="margin-top:20px; float: right; display: none" href="/blog" id="more">More</a>
    </div>
    

</section>



<section class="custom-section" id="subscribe-section">

    <h5 style="text-align:center; margin-bottom:40px">Connect</h5>


    <div class="row">
        <div class="three columns">
            
            <div id="social">
                <a href="" class="social" style="background-color: #3D5B94;" id="f" target="_blank">f</a>
                <a href="" class="social" style="background-color: #3DACDD;" id="t" target="_blank">t</a>
                <a href="" class="social" style="background-color: #1E83AE;" id="in" target="_blank">in</a>
                <a href="" class="social" style="background-color: #33C3F0;" id="b" target="_blank">b</a>
            </div>
			
        </div>
        <div class="nine columns">

            <form>
                <div class="row">
                    <div class="nine columns">
                        <input class="u-full-width" type="email" placeholder="some@one.com" id="emailInput">
                    </div>
                    <div class="three columns">
                        <input class="button-primary" type="submit" value="Submit">
                    </div>
                </div>
                    <label for="emailInput">I'll respect your privacy.</label>
            </form>
            
        </div>
    </div>
    


</section>


<!-- temp mounting div -->
	
	<div id="temp" style="display:none"></div>
	
<!-- temp mounting div -->


</div>


  
  <div id="footer"></div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/remarkable/1.7.1/remarkable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/1.0.5/purify.min.js"></script>

  <script src="https://unpkg.com/dsteem@latest/dist/dsteem.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
 
  <script src="public/js/custom.js" type="text/javascript"></script>
  
  <script>
  //
  
    var client = new dsteem.Client(configs.steem_api);
    client.database.getDiscussions('blog', {tag: configs.steem_account, limit: configs.homepage_post_limit}).then(function(discussions){
		//console.log(discussions);
		for (var x in discussions) {
			create_post(discussions[x]);
		}
		
		$('#loader').hide();
		$('#more').show();
    });
	
	
	function create_post(post) {
	
		var row = document.createElement("div");
		row.className = "row";
		
			var twoColumn = document.createElement("div");
			twoColumn.className = "two columns";
		
				var img = document.createElement("img");
				img.src = first_img(post.body);
				img.style.width = "120px";
				
			twoColumn.appendChild(img);
		
		row.appendChild(twoColumn);
		
			var tenColumn = document.createElement("div");
			tenColumn.className = "ten columns";
		
				var row2 = document.createElement("div");
				row2.className = "row";
				
					var tenColumn2 = document.createElement("div");
					tenColumn2.className = "ten columns";
		
						var b = document.createElement("b");
						b.innerText = post.title;
				
					tenColumn2.appendChild(b);
				
				row2.appendChild(tenColumn2);
				
					var twoColumn2 = document.createElement("div");
					twoColumn2.className = "two columns";
				
						var small = document.createElement("small");
						small.innerText = new Date(post.created).toDateString();
					
					twoColumn2.appendChild(small);
				
				row2.appendChild(twoColumn2);
			
			tenColumn.appendChild(row2);
			
			var p = document.createElement("p");
				
				var span = document.createElement("span");
				span.innerText = parseText(post.body);
			
				var br = document.createElement("br");
			
				var a = document.createElement("a");
				a.href = configs.steem_app + post.category + "/@" + post.author + "/" + post.permlink;
				a.target = "_blank";
				a.innerText = "Continue reading";
			
				p.appendChild(span);
				p.appendChild(br);
				p.appendChild(a);
			
			tenColumn.appendChild(p);
		
		row.appendChild(tenColumn);
		
		document.getElementById('posts').appendChild(row);
		
	}
  
  
	function first_img(text) {
		
		try{
			var src = text.match(/(https?:\/\/.*\.(?:png|jpg|jpeg|gif|png|svg))/i)[0];
			if(src !== null || scr !== undefined) return src;
			return '/public/img/placeholder.png';
		} catch(err){
			//console.log(err);
			return 'public/img/placeholder.png';
		}
		
	}
  
  
	function parseText(html) {
		
		var md = new Remarkable({
			html: true, // Remarkable renders first then sanitize runs...
			breaks: false,
			linkify: false, // linkify is done locally
			typographer: false, // https://github.com/jonschlinkert/remarkable/issues/142#issuecomment-221546793
			quotes: '“”‘’',
		});
		
		//sanitze html before appending to  '#temp'
		var safeText = DOMPurify.sanitize(html);
		
		$('#temp').html(md.render(safeText));
		
		var htmlString = $("#temp").text();
		var stripedHtml = htmlString.replace(/<[^>]+>/g, '');
		var stripedNewline = stripedHtml.replace(/\r?\n|\r/g, ' ');
		var stripeImg = stripedNewline.replace(/(http)?s?:?(\/\/[^"']*\.(?:png|jpg|jpeg|gif|png|svg))/ig, '');
		var trimHtml = stripeImg.trim();
		
		$('#temp').html("");
		
		return trimHtml.substring(0, 200) + "... ";
		
	}
  
  
  </script>


  
  

</body></html>